<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<div class="usersDetailsWrap"></div>

<script >


    // console.log(location.href);
    //
    // const url = new URL(location);
    // const JOSINUser = url.searchParams.get('user');
    //
    // console.log(JOSINUser);
    //
    // const user = JSON.parse(JOSINUser);
    // console.log(url);
    //
    //
    //
    // document.body.innerText = JSON.stringify(user, null, 2);

    fetch(`https://jsonplaceholder.typicode.com/users/`)
        .then(value => value.json())
        .then(value => {
            let usersDetailsWrap = document.getElementsByClassName('usersDetailsWrap')[0];
            for (const user of value) {
                let div = document.createElement('div');
                const url = new URL(location);
                const JOSINUser = url.searchParams.get('user');
                div.innerText = JSON.stringify(user, null, 2);
                let btn = document.createElement('button');
                btn.innerText = 'post';
                btn.onclick = function () {
                    window.location.href = `post-details.html?post=${JSON.stringify(user)}`;
                    fetch(`https://jsonplaceholder.typicode.com/posts`)
                        .then(value => value.json())
                        .then(value => {
                            let usersPosts = document.getElementsByClassName('users-posts')[0];
                            for (const post of value){
                                let div = document.createElement('div');
                                div.innerText = user.post;
                            }
                        })
                }
                div.append(btn);
                usersDetailsWrap.append(div);
            }
        })
</script>
</body>
</html>